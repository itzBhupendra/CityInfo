using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;

class Program
{
    public class Item
    {
        public string Name { get; set; }
        public string DateTimeString { get; set; }
    }

    static void Main()
    {
        // List of items with DateTime strings including variable milliseconds
        var items = new List<Item>
        {
            new Item { Name = "Item1", DateTimeString = "2024-11-26T15:23:45.123" },
            new Item { Name = "Item2", DateTimeString = "2024-11-26T04:54:15.95" }, // 2 digits for milliseconds
            new Item { Name = "Item3", DateTimeString = "2024-11-25T10:15:30.456" },
            new Item { Name = "Item4", DateTimeString = "2024-11-26T15:23:44.789" }
        };

        // Sort items by DateTimeString property including milliseconds
        var sortedItems = items
            .OrderBy(item => NormalizeAndParseDateTime(item.DateTimeString))
            .ToList();

        // Print sorted items
        Console.WriteLine("Sorted Items:");
        foreach (var item in sortedItems)
        {
            Console.WriteLine($"{item.Name} - {item.DateTimeString}");
        }
    }

    // Helper method to normalize and parse the DateTime string
    static DateTime NormalizeAndParseDateTime(string dateTimeString)
    {
        // Ensure milliseconds are always 3 digits
        var normalizedString = dateTimeString.Contains('.')
            ? dateTimeString.Split('.')[0] + "." + dateTimeString.Split('.')[1].PadRight(3, '0')
            : dateTimeString;
        return DateTime.ParseExact(normalizedString, "yyyy-MM-ddTHH:mm:ss.fff", CultureInfo.InvariantCulture);
    }
}
